<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>XSAP â€¢ ×©××œ×•×Ÿ ×”×¦×˜×¨×¤×•×ª</title>
  <style>
    body{margin:0;background:#0f0f10;color:#f3f4f6;font-family:Arial,Helvetica,sans-serif}
    .wrap{max-width:880px;margin:40px auto;padding:20px}
    h1{margin:0 0 12px;color:#a43a2f}
    form{background:#141416;border:1px solid rgba(164,58,47,.2);border-radius:14px;padding:18px}
    .grid{display:grid;gap:16px}
    @media(min-width:820px){.two{grid-template-columns:1fr 1fr}}
    .field{display:grid;gap:8px}
    input,textarea{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(164,58,47,.28);background:#0f0f10;color:#f3f4f6}
    textarea{min-height:110px}
    .chips{display:grid;gap:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
    label.chip{display:flex;align-items:center;gap:8px;border:1px solid rgba(164,58,47,.25);padding:10px 12px;border-radius:999px;background:linear-gradient(180deg,rgba(164,58,47,.08),rgba(164,58,47,.04))}
    .actions{display:flex;gap:10px;margin-top:10px}
    button{border:0;border-radius:12px;padding:14px 18px;font-weight:800;cursor:pointer}
    .primary{background:linear-gradient(180deg,#a43a2f,#8e2f25);color:#fff}
    .secondary{background:transparent;border:2px solid #a43a2f;color:#a43a2f}
    .ok,.err{margin-top:12px;padding:12px;border-radius:10px;display:none}
    .ok{background:rgba(34,197,94,.12);border:1px solid rgba(34,197,94,.36)}
    .err{background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.4)}
    .show{display:block}
    small{color:#9aa0a6}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>×‘×¨×•×›×™× ×”×‘××™× ×œ-XSAP</h1>
    <p><small>××œ×/×™ ××ª ×”×©××œ×•×Ÿ. ×”×©×œ×™×—×” ×ª×’×™×¢ ×œ×˜×œ×’×¨× ×©×œ ×”×¡×˜×•×“×™×•.</small></p>

    <form id="xsapForm" novalidate>
      <div class="grid">
        <div class="field">
          <label>ğŸ‘¤ ×©× *</label>
          <input name="name" required placeholder="×©× ××œ×" />
        </div>

        <div class="grid two">
          <div class="field">
            <label>ğŸ‚ ×’×™×œ *</label>
            <input name="age" type="number" min="6" max="100" required placeholder="×œ×“×•×’××”: 28" />
          </div>
          <div class="field">
            <label>ğŸ“ ×××™×¤×” ××ª/×” *</label>
            <input name="location" required placeholder="×¢×™×¨ / ×©×›×•× ×”" />
          </div>
        </div>

        <div class="field">
          <label>ğŸ‹ï¸â€â™€ï¸ × ×™×¡×™×•×Ÿ ×§×•×“× ×‘××™××•× ×™× *</label>
          <div class="chips">
            <label class="chip"><input type="radio" name="experience" value="××™×Ÿ × ×™×¡×™×•×Ÿ" required/>××™×Ÿ × ×™×¡×™×•×Ÿ</label>
            <label class="chip"><input type="radio" name="experience" value="××¢×˜ × ×™×¡×™×•×Ÿ" />××¢×˜ × ×™×¡×™×•×Ÿ</label>
            <label class="chip"><input type="radio" name="experience" value="××ª××× /×ª ×§×‘×•×¢/×”" />××ª××× /×ª ×§×‘×•×¢/×”</label>
            <label class="chip"><input type="radio" name="experience" value="×”×ª××× /×ª×™ ×‘×¢×‘×¨" />×”×ª××× /×ª×™ ×‘×¢×‘×¨</label>
          </div>
        </div>

        <div class="field">
          <label>ğŸ’¬ ×›××” ××™×œ×™× ×¢×œ×™×š</label>
          <textarea name="about" placeholder="×¢×‘×•×“×”, ×¡×’× ×•×Ÿ ×—×™×™×, ×”×¨×™×•×Ÿ, ×¤×¦×™×¢×•×ª ×× ×™×©â€¦"></textarea>
        </div>

        <div class="field">
          <label>âœ¨ ××™×š ×”×’×¢×ª ××œ×™× ×•? *</label>
          <div class="chips">
            <label class="chip"><input type="radio" name="source" value="×”××œ×¦×”" required/>×”××œ×¦×”</label>
            <label class="chip"><input type="radio" name="source" value="××™× ×¡×˜×’×¨×" />××™× ×¡×˜×’×¨×</label>
            <label class="chip"><input type="radio" name="source" value="××™×–×™" />××™×–×™</label>
            <label class="chip"><input type="radio" name="source" value="×’×•×’×œ" />×’×•×’×œ</label>
          </div>
          <input name="source_other" placeholder="××—×¨ (× × ×œ×¤×¨×˜)" />
        </div>

        <div class="field">
          <label>ğŸ”¥ ××ª×™ × ×•×— ×œ×š ×œ×”×’×™×¢ ×œ××™××•× ×™×? *</label>
          <div class="chips">
            <label class="chip"><input type="radio" name="time" value="×‘×•×§×¨" required/>×‘×•×§×¨</label>
            <label class="chip"><input type="radio" name="time" value="×¢×¨×‘" />×¢×¨×‘</label>
            <label class="chip"><input type="radio" name="time" value="×ª×œ×•×™ ×‘×©×‘×•×¢" />×ª×œ×•×™ ×‘×©×‘×•×¢</label>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="primary" type="submit">×©×œ×™×—×”</button>
        <button class="secondary" type="reset">× ×™×§×•×™</button>
      </div>

      <div id="okMsg" class="ok">âœ… × ×©×œ×—! ×”×”×•×“×¢×” ×”×’×™×¢×” ×œ×˜×œ×’×¨×.</div>
      <div id="errMsg" class="err">âŒ ××•×¤×¡â€¦ ×”×©×œ×™×—×” × ×›×©×œ×”. × ×¡×”/×™ ×©×•×‘.</div>
    </form>
  </div>

  <script>
    const form = document.getElementById('xsapForm');
    const okMsg = document.getElementById('okMsg');
    const errMsg = document.getElementById('errMsg');

    const radio = (name)=> (document.querySelector(`input[name="${name}"]:checked`)?.value || '');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      okMsg.classList.remove('show'); errMsg.classList.remove('show');
      if(!form.checkValidity()){ form.reportValidity(); return; }

      const payload = {
        name: form.name.value.trim(),
        age: form.age.value.trim(),
        location: form.location.value.trim(),
        experience: radio('experience'),
        about: form.about.value.trim(),
        source: radio('source'),
        source_other: form.source_other.value.trim(),
        time: radio('time')
      };

      const summary = [
        'ğŸ“ ×©××œ×•×Ÿ XSAP â€” ×ª×©×•×‘×•×ª:',
        `ğŸ‘¤ ×©×: ${payload.name}`,
        `ğŸ‚ ×’×™×œ: ${payload.age}`,
        `ğŸ“ ×××™×¤×”: ${payload.location}`,
        `ğŸ‹ï¸â€â™€ï¸ × ×™×¡×™×•×Ÿ: ${payload.experience}`,
        `ğŸ’¬ ×¢×œ×™×š: ${payload.about || 'â€”'}`,
        `âœ¨ ××§×•×¨ ×”×’×¢×”: ${payload.source || (payload.source_other ? '××—×¨' : '')}${payload.source_other ? ' â€” ' + payload.source_other : ''}`,
        `ğŸ”¥ ×–××Ÿ × ×•×—: ${payload.time}`
      ].join('\n');
      payload.text = summary;

      try{
        const res = await fetch('/api/send-telegram', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });
        if(!res.ok) throw new Error('send failed');
        okMsg.classList.add('show'); form.reset();
      }catch(err){ errMsg.classList.add('show'); console.error(err); }
    });
  </script>
</body>
</html>
